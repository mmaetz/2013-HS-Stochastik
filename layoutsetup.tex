%\quad ,\\% Memoir layout setup

%% NOTE: You are strongly advised not to change any of them unless you
%% know what you are doing.  These settings strongly interact in the
%% final look of the document.

% Dependencies
\usepackage{array}

% Define the default sans serif font as the lighter computer modern bright by
% D. Knuth.
\renewcommand{\sfdefault}{cmbr}

%%% Define a nice orange color and use it for hyperref
%%% Needs xcolor
\usepackage{xcolor}
\definecolor{rioday}{RGB}{255,166,0} 
\hypersetup{colorlinks=false,linkbordercolor=rioday}


% Turn extra space before chapter headings off.

% Chapter style redefinition
\makeatletter
\newcommand\thickhrulefill{\leavevmode \leaders%
\hrule height 6.25pt depth -3.25pt \hfill \kern \z@}

\let\old@rule\@rule
\def\@rule[#1]#2#3{\textcolor{rulecolor}{\old@rule[#1]{#2}{#3}}}
\newcommand{\colorhrule}[3]{%
	\begingroup\color{#1}\hrule height #2 width #3\endgroup
}%
\def\saturation{200}
\def\brightness{170}
\definecolor{chapterlinecolor}{HSB}{250,\saturation,\brightness}
\definecolor{sectionlinecolor}{HSB}{166,\saturation,\brightness}
\definecolor{subsectionlinecolor}{HSB}{80,\saturation,\brightness}

\makechapterstyle{test}{
	\setlength\midchapskip{0.5em}
	\setlength\afterchapskip{0.2em}
	\setlength\beforechapskip{0.2em}
	%\setlength\beforesecskip{0cm}
	%\setlength\aftersecskip{0cm}
	\renewcommand{\chapterheadstart}{\colorlet{rulecolor}{chapterlinecolor}\rule{\columnwidth}{1.5em}%\vspace{-1pt}}
}
	\renewcommand{\printchaptername}{}
	%\renewcommand\colorchapnum{\color{\chapterlinecolor}}
	\renewcommand{\chapternamenum}{}
	\renewcommand{\chapnumfont}{\normalfont\Huge\bfseries}
	\renewcommand{\printchapternum}{\chapnumfont\space\thechapter}
	\renewcommand{\afterchapternum}{\space}
	\renewcommand{\afterchaptertitle}{\par\nobreak\vspace{-0.5em}\rule{\columnwidth}{0.2em}\vskip\afterchapskip}
}

%\titleformat{\section}{\normalfont\bfseries}{\thesection}{1em}{}
%\titlespacing*{\section}{0pt}{*0}{0pt}



% Set the way pages are layed out (headers and page numbering)
\pagestyle{empty}
%\if@twoside
  %\pagestyle{Ruled}
%\else
  %\pagestyle{ruled}
%\fi

% Use the newly defined style
%\chapterstyle{VZ14}
\chapterstyle{test}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Redefine sectional headings to contain rules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\let\origsection\section
%\renewcommand\section{\@ifstar{\starsection}{\nostarsection}}
\renewcommand{\section}{\@startsection{section}{1}{\z@}%
{-2\baselineskip}{1em}
	%{-3.5ex \@plus -1ex \@minus -.2ex}%
	%{2.3ex \@plus.2ex}%
	{%
		\vspace{-2\baselineskip}
	\textcolor{sectionlinecolor}{\hrule depth 1em}
%\nolinebreak[4]
	%
\Large\bfseries\sffamily}}
\let\origsection\section
\renewcommand\section{\@ifstar{\starsection}{\nostarsection}}

\newcommand\nostarsection[1]
{\sectionprelude\origsection{#1}\sectionpostlude}
%{\origsection{#1}\sectionpostlude}
\newcommand\starsection[1]
{\sectionprelude\origsection*{#1}\sectionpostlude}

\newcommand\sectionprelude{%
	%\vspace{-\baselineskip}
	%\colorhrule{sectionlinecolor}{1em}{\columnwidth} 
	%\vspace{-0.5\baselineskip}
	}
\newcommand\sectionpostlude{%
	%\vspace{-0.5ex}
	%\colorhrule{sectionlinecolor}{0.2em}{\columnwidth} 
	%\vspace{0.5\baselineskip}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Redefine subsectional headings to contain rules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
{-2\baselineskip}{0.5em}
	%{-3.5ex \@plus -1ex \@minus -.2ex}%
	%{2.3ex \@plus.2ex}%
	{%
	\vspace{-2\baselineskip}
	\textcolor{subsectionlinecolor}{\hrule depth 0.5em}
	%
\Large\bfseries\sffamily}}

\let\origsubsection\subsection
\renewcommand\subsection{\@ifstar{\starsubsection}{\nostarsubsection}}

\newcommand\nostarsubsection[1]
{\subsectionprelude\origsubsection{#1}\subsectionpostlude}
%{\origsubsection{#1}\subsectionpostlude}
\newcommand\starsubsection[1]
{\subsectionprelude\origsubsection*{#1}\subsectionpostlude}

\newcommand\subsectionprelude{%
	\vspace{\baselineskip}
	%\colorhrule{subsectionlinecolor}{1em}{\columnwidth} 
	%\vspace{-0.5\baselineskip}
	}
\newcommand\subsectionpostlude{%
	\vspace{-0.2ex}
	%\colorhrule{subsectionlinecolor}{0.1em}{\columnwidth} 
	%\vspace{0.5\baselineskip}
}


%\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
%{-2\baselineskip}{8pt}
%	{%
%	\vspace{\baselineskip}
%	\textcolor{subsectionlinecolor}{\hrule depth 5pt}
%	%
%\Large\bfseries\sffamily}}

%\titlespacing{\section}{\z@}{\z@}{\z@}

\setparaheadstyle{\normalsize\bfseries\sffamily}
\setsubparaheadstyle{\normalsize\bfseries\sffamily}

% Set captions to a more separated style for clearness
\captionnamefont{\sffamily\bfseries\footnotesize}
\captiontitlefont{\sffamily\footnotesize}
\setlength{\intextsep}{16pt}
\setlength{\belowcaptionskip}{1pt}

%%% Make a bit of additional space for footnotes
\addtolength{\skip\footins}{4pt}
\renewcommand{\footnoterule}{%
   \kern -7pt                   % call this kerna
   \hrule height 0.4pt width 0.4\columnwidth
   \kern 6.6pt                  % call this kernb
}

% Set section and TOC numbering depth to subsection
\setsecnumdepth{subsection}
\settocdepth{subsection}

% Turn off american style paragraph indentation and add some space to be
% printed when a new paragraph starts.

\setlength{\parindent}{0pt}
\addtolength{\parskip}{2pt}

\newcommand{\professor}[1]{\def\@professor{#1}}
\renewcommand{\maketitlehookb}%
{\vspace{2em}\centering\Large\@professor\vspace{0.3\textheight}}

%% This provides a frontend to set the lecture date into the header
%% The chapter names are usually shorter than the section names. So the date should be at this place.
\renewcommand{\footruleskip}{-5pt}
\makeatother

% This defines how theorems should look. Best leave as is.
\theoremstyle{nonumberbreak}
\theoremseparator{:\quad}
\theoremprework{}
\theoremindent2em
\theoremheaderfont{\sffamily\bfseries}
\theorembodyfont{\normalfont}
\theoremsymbol{}
%% Minimal margin to print two pages on an A4 paper or viewing it on tablets.
\expandafter\def\expandafter\normalsize\expandafter{%
\normalsize
\setlength\abovedisplayskip{5pt}
\setlength\belowdisplayskip{5pt}
\setlength\abovedisplayshortskip{2pt}
\setlength\belowdisplayshortskip{2pt}
}

%%% paralist config
\pltopsep0.7em
\plpartopsep0.7ex
\plitemsep0.7ex
\plparsep0.7ex

%%% Page layout
\newcommand{\margin}{0.8cm}
\setstocksize{21.0cm}{29.7cm}
\settrimmedsize{\stockheight}{\stockwidth}{*}
\settypeblocksize{\stockheight-\margin*2}{\stockwidth-\margin*2}{*}
\setlrmargins{\margin}{*}{*}
\setlrmarginsandblock{\margin}{*}{*}
\setulmargins{\margin}{*}{*}
\setulmarginsandblock{\margin}{*}{*}
\setheadfoot{7pt}{7pt}
\checkandfixthelayout
